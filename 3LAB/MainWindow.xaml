<Window x:Class="_3LAB.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="3LAB — Лабораторная работа №3 (WPF)"
        Width="1000" Height="650"
        MinWidth="800" MinHeight="500"
        KeyDown="MainWindow_KeyDown">

    <DockPanel>

        <!-- Меню -->
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="_Файл">
                <MenuItem Header="Поменять _фон..." Name="miChangeBackground" MouseEnter="UIElement_MouseEnter" MouseLeave="UIElement_MouseLeave" Click="miChangeBackground_Click"/>
                <Separator/>
                <MenuItem Header="_Сохранить рисунок (Ctrl+S)" Name="miSave" MouseEnter="UIElement_MouseEnter" MouseLeave="UIElement_MouseLeave" Click="miSave_Click"/>
                <MenuItem Header="_Выход" Name="miExit" MouseEnter="UIElement_MouseEnter" MouseLeave="UIElement_MouseLeave" Click="miExit_Click"/>
            </MenuItem>

            <MenuItem Header="_Правка">
                <MenuItem Header="_Отменить (Ctrl+Z)" Name="miUndo" Click="miUndo_Click" MouseEnter="UIElement_MouseEnter" MouseLeave="UIElement_MouseLeave"/>
                <MenuItem Header="_Повторить (Ctrl+Y)" Name="miRedo" Click="miRedo_Click" MouseEnter="UIElement_MouseEnter" MouseLeave="UIElement_MouseLeave"/>
                <Separator/>
                <MenuItem Header="Очистить _рисунок" Name="miClear" MouseEnter="UIElement_MouseEnter" MouseLeave="UIElement_MouseLeave" Click="miClear_Click"/>
            </MenuItem>

            <MenuItem Header="_Справка">
                <MenuItem Header="О _разработчике" Name="miAbout" MouseEnter="UIElement_MouseEnter" MouseLeave="UIElement_MouseLeave" Click="miAbout_Click"/>
            </MenuItem>
        </Menu>

        <!-- Панель инструментов -->
        <ToolBarTray DockPanel.Dock="Top">
            <ToolBar>
                <Button Name="tbChangeBackground" Click="miChangeBackground_Click" MouseEnter="UIElement_MouseEnter" MouseLeave="UIElement_MouseLeave">Фон</Button>
                <Button Name="tbUndo" Click="miUndo_Click" MouseEnter="UIElement_MouseEnter" MouseLeave="UIElement_MouseLeave">Отмена</Button>
                <Button Name="tbRedo" Click="miRedo_Click" MouseEnter="UIElement_MouseEnter" MouseLeave="UIElement_MouseLeave">Повтор</Button>
                <Button Name="tbSave" Click="miSave_Click" MouseEnter="UIElement_MouseEnter" MouseLeave="UIElement_MouseLeave">Сохранить</Button>
                <Button Name="tbClear" Click="miClear_Click" MouseEnter="UIElement_MouseEnter" MouseLeave="UIElement_MouseLeave">Очистить</Button>
            </ToolBar>
        </ToolBarTray>

        <!-- Строка состояния (фиксированной высоты) -->
        <StatusBar DockPanel.Dock="Bottom" Height="26" MinHeight="26" MaxHeight="26">
            <TextBlock Name="StatusText" VerticalAlignment="Center" />
            <StatusBarItem HorizontalAlignment="Right">
                <TextBlock Text="Готово" Margin="10,0" VerticalAlignment="Center"/>
            </StatusBarItem>
        </StatusBar>

        <!-- Основное содержимое -->
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="300"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Левая панель управления -->
            <StackPanel Grid.Column="0" Margin="8" VerticalAlignment="Top">
                <TextBlock FontWeight="Bold" Margin="0,0,0,6">Графический редактор</TextBlock>

                <!-- Выбор цвета кисти -->
                <TextBlock>Цвет кисти:</TextBlock>
                <ComboBox Name="cbBrushColor" SelectionChanged="cbBrushColor_SelectionChanged" SelectedIndex="0">
                    <ComboBoxItem Tag="Black">
                        <StackPanel Orientation="Horizontal">
                            <Rectangle Width="16" Height="16" Fill="Black" Margin="2"/>
                            <TextBlock Text="Черный" Margin="6,0"/>
                        </StackPanel>
                    </ComboBoxItem>
                    <ComboBoxItem Tag="Red">
                        <StackPanel Orientation="Horizontal">
                            <Rectangle Width="16" Height="16" Fill="Red" Margin="2"/>
                            <TextBlock Text="Красный" Margin="6,0"/>
                        </StackPanel>
                    </ComboBoxItem>
                    <ComboBoxItem Tag="Green">
                        <StackPanel Orientation="Horizontal">
                            <Rectangle Width="16" Height="16" Fill="Green" Margin="2"/>
                            <TextBlock Text="Зеленый" Margin="6,0"/>
                        </StackPanel>
                    </ComboBoxItem>
                    <ComboBoxItem Tag="Blue">
                        <StackPanel Orientation="Horizontal">
                            <Rectangle Width="16" Height="16" Fill="Blue" Margin="2"/>
                            <TextBlock Text="Синий" Margin="6,0"/>
                        </StackPanel>
                    </ComboBoxItem>
                    <ComboBoxItem Tag="Yellow">
                        <StackPanel Orientation="Horizontal">
                            <Rectangle Width="16" Height="16" Fill="Yellow" Margin="2"/>
                            <TextBlock Text="Желтый" Margin="6,0"/>
                        </StackPanel>
                    </ComboBoxItem>
                    <ComboBoxItem Tag="Purple">
                        <StackPanel Orientation="Horizontal">
                            <Rectangle Width="16" Height="16" Fill="Purple" Margin="2"/>
                            <TextBlock Text="Пурпурный" Margin="6,0"/>
                        </StackPanel>
                    </ComboBoxItem>
                </ComboBox>

                <!-- Размер кисти -->
                <TextBlock Margin="0,10,0,0">Размер кисти: <TextBlock Name="tbSizeValue" Text="3" FontWeight="Bold" /></TextBlock>
                <Slider Name="sliderBrushSize" Minimum="1" Maximum="30" Value="3" ValueChanged="sliderBrushSize_ValueChanged"/>

                <!-- Режим -->
                <TextBlock Margin="0,10,0,0">Режим:</TextBlock>
                <StackPanel>
                    <RadioButton Content="Рисование" Name="rbInk" Checked="rbMode_Checked" IsChecked="True"/>
                    <RadioButton Content="Выделение/редактирование" Name="rbSelect" Checked="rbMode_Checked"/>
                    <RadioButton Content="Стереть по точкам" Name="rbEraseByPoint" Checked="rbMode_Checked"/>
                    <RadioButton Content="Стереть по штрихам" Name="rbEraseByStroke" Checked="rbMode_Checked"/>
                </StackPanel>

                <!-- Кнопки -->
                <StackPanel Orientation="Horizontal" Margin="0,12,0,0">
                    <Button Click="miSave_Click" Width="100" Margin="0,0,6,0">Сохранить</Button>
                    <Button Click="miClear_Click" Width="100">Очистить</Button>
                </StackPanel>

                <!-- Палитра фона -->
                <Border Name="PaletteBorder" Visibility="Collapsed" BorderBrush="Gray" BorderThickness="1" Margin="0,18,0,0" Padding="6">
                    <StackPanel>
                        <TextBlock FontWeight="Bold">Выберите цвет фона (превью)</TextBlock>
                        <WrapPanel Name="PaletteWrap" Margin="0,6,0,6">
                            <Button Background="White" Width="32" Height="24" Margin="2" Click="PaletteColor_Click"/>
                            <Button Background="LightGray" Width="32" Height="24" Margin="2" Click="PaletteColor_Click"/>
                            <Button Background="LightBlue" Width="32" Height="24" Margin="2" Click="PaletteColor_Click"/>
                            <Button Background="LightGreen" Width="32" Height="24" Margin="2" Click="PaletteColor_Click"/>
                            <Button Background="LightYellow" Width="32" Height="24" Margin="2" Click="PaletteColor_Click"/>
                            <Button Background="LightPink" Width="32" Height="24" Margin="2" Click="PaletteColor_Click"/>
                            <Button Background="Beige" Width="32" Height="24" Margin="2" Click="PaletteColor_Click"/>
                            <Button Background="Lavender" Width="32" Height="24" Margin="2" Click="PaletteColor_Click"/>
                            <Button Background="Gainsboro" Width="32" Height="24" Margin="2" Click="PaletteColor_Click"/>
                        </WrapPanel>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                            <Button Name="btnPaletteOk" Click="btnPaletteOk_Click" Width="36" Height="30" Margin="4" ToolTip="Применить фон">
                                <Image Source="pack://siteoforigin:,,,/Images/CheckMark.png" Stretch="Uniform"/>
                            </Button>
                            <Button Name="btnPaletteCancel" Click="btnPaletteCancel_Click" Width="36" Height="30" Margin="4" ToolTip="Отмена">
                                <Image Source="pack://siteoforigin:,,,/Images/Cross.png" Stretch="Uniform"/>
                            </Button>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </StackPanel>

            <!-- Область рисования -->
            <Border Grid.Column="1" Margin="8" BorderBrush="Gray" BorderThickness="1">
                <InkCanvas Name="inkCanvas" Background="White"/>
            </Border>
        </Grid>
    </DockPanel>
</Window>
