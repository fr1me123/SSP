<Window x:Class="_6LAB.Task2Window"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Задание 2: Текстовый редактор с триггерами" 
        Height="700" Width="950"
        WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <!-- Градиентный фон для текстовых полей -->
        <LinearGradientBrush x:Key="TextAreaGradient" StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#F4F6F6" Offset="0"/>
            <GradientStop Color="#EAEDED" Offset="0.5"/>
            <GradientStop Color="#D5DBDB" Offset="1"/>
        </LinearGradientBrush>

        <!-- Стиль для кнопки Открыть с простыми триггерами -->
        <Style x:Key="OpenButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#3498DB"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Normal"/>
            <Setter Property="Padding" Value="18,10"/>
            <Setter Property="Margin" Value="8"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>

            <Style.Triggers>
                <!-- Простой триггер для наведения -->
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#2980B9"/>
                    <Setter Property="FontWeight" Value="SemiBold"/>
                    <Setter Property="Effect">
                        <Setter.Value>
                            <DropShadowEffect ShadowDepth="4" BlurRadius="12" Opacity="0.4"/>
                        </Setter.Value>
                    </Setter>
                </Trigger>

                <!-- Простой триггер для нажатия -->
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#2471A3"/>
                    <Setter Property="Foreground" Value="#F7DC6F"/>
                    <Setter Property="RenderTransform">
                        <Setter.Value>
                            <ScaleTransform ScaleX="0.92" ScaleY="0.92"/>
                        </Setter.Value>
                    </Setter>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Стиль для кнопки Очистить с MultiTrigger -->
        <Style x:Key="ClearButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#E67E22"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Normal"/>
            <Setter Property="Padding" Value="18,10"/>
            <Setter Property="Margin" Value="8"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>

            <Style.Triggers>
                <!-- MultiTrigger - срабатывает только при выполнении всех условий -->
                <MultiTrigger>
                    <MultiTrigger.Conditions>
                        <Condition Property="IsMouseOver" Value="True"/>
                        <Condition Property="IsEnabled" Value="True"/>
                    </MultiTrigger.Conditions>
                    <MultiTrigger.Setters>
                        <Setter Property="Background" Value="#D35400"/>
                        <Setter Property="FontWeight" Value="SemiBold"/>
                        <Setter Property="Foreground" Value="#FDEBD0"/>
                        <Setter Property="RenderTransform">
                            <Setter.Value>
                                <TranslateTransform X="0" Y="-3"/>
                            </Setter.Value>
                        </Setter>
                    </MultiTrigger.Setters>
                </MultiTrigger>

                <!-- Триггер для нажатия -->
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#BA4A00"/>
                    <Setter Property="RenderTransform">
                        <Setter.Value>
                            <ScaleTransform ScaleX="0.90" ScaleY="0.90"/>
                        </Setter.Value>
                    </Setter>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Стиль для кнопки Закрыть с DataTrigger и MultiDataTrigger -->
        <Style x:Key="CloseButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#E74C3C"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Normal"/>
            <Setter Property="Padding" Value="18,10"/>
            <Setter Property="Margin" Value="8"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>

            <Style.Triggers>
                <!-- DataTrigger - зависит от свойства IsEnabled -->
                <DataTrigger Binding="{Binding RelativeSource={RelativeSource Self}, Path=IsEnabled}" Value="False">
                    <Setter Property="Background" Value="#95A5A6"/>
                    <Setter Property="Foreground" Value="#7B7D7D"/>
                    <Setter Property="Cursor" Value="No"/>
                </DataTrigger>

                <!-- MultiDataTrigger - срабатывает при выполнении всех условий -->
                <MultiDataTrigger>
                    <MultiDataTrigger.Conditions>
                        <Condition Binding="{Binding RelativeSource={RelativeSource Self}, Path=IsEnabled}" Value="True"/>
                        <Condition Binding="{Binding RelativeSource={RelativeSource Self}, Path=IsMouseOver}" Value="True"/>
                    </MultiDataTrigger.Conditions>
                    <MultiDataTrigger.Setters>
                        <Setter Property="Background" Value="#CB4335"/>
                        <Setter Property="FontWeight" Value="Bold"/>
                        <Setter Property="Effect">
                            <Setter.Value>
                                <DropShadowEffect ShadowDepth="5" BlurRadius="18" Color="#E74C3C" Opacity="0.4"/>
                            </Setter.Value>
                        </Setter>
                    </MultiDataTrigger.Setters>
                </MultiDataTrigger>

                <!-- Триггер для нажатия -->
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#A93226"/>
                    <Setter Property="Foreground" Value="#FADBD8"/>
                    <Setter Property="RenderTransform">
                        <Setter.Value>
                            <ScaleTransform ScaleX="0.88" ScaleY="0.88"/>
                        </Setter.Value>
                    </Setter>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- EventTrigger для анимации текстовых полей -->
        <Style x:Key="AnimatedTextBoxStyle" TargetType="TextBox">
            <Setter Property="Background" Value="{StaticResource TextAreaGradient}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#AAB7B8"/>
            <Setter Property="Padding" Value="12"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Foreground" Value="#2C3E50"/>
            <Setter Property="TextWrapping" Value="Wrap"/>
            <Setter Property="AcceptsReturn" Value="True"/>
            <Setter Property="VerticalScrollBarVisibility" Value="Auto"/>
            <Setter Property="Border.CornerRadius" Value="6"/>

            <Style.Triggers>
                <!-- Триггер при получении фокуса -->
                <Trigger Property="IsFocused" Value="True">
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <ColorAnimation To="#EBF5FB" 
                                              Storyboard.TargetProperty="Background.(LinearGradientBrush.GradientStops)[0].(GradientStop.Color)" 
                                              Duration="0:0:0.3"/>
                                <ColorAnimation To="#D6EAF8" 
                                              Storyboard.TargetProperty="Background.(LinearGradientBrush.GradientStops)[1].(GradientStop.Color)" 
                                              Duration="0:0:0.3"/>
                                <ColorAnimation To="#AED6F1" 
                                              Storyboard.TargetProperty="Background.(LinearGradientBrush.GradientStops)[2].(GradientStop.Color)" 
                                              Duration="0:0:0.3"/>
                                <ThicknessAnimation To="2" 
                                                  Storyboard.TargetProperty="BorderThickness" 
                                                  Duration="0:0:0.2"/>
                                <ColorAnimation To="#3498DB" 
                                              Storyboard.TargetProperty="BorderBrush.Color" 
                                              Duration="0:0:0.3"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <ColorAnimation To="#F4F6F6" 
                                              Storyboard.TargetProperty="Background.(LinearGradientBrush.GradientStops)[0].(GradientStop.Color)" 
                                              Duration="0:0:0.3"/>
                                <ColorAnimation To="#EAEDED" 
                                              Storyboard.TargetProperty="Background.(LinearGradientBrush.GradientStops)[1].(GradientStop.Color)" 
                                              Duration="0:0:0.3"/>
                                <ColorAnimation To="#D5DBDB" 
                                              Storyboard.TargetProperty="Background.(LinearGradientBrush.GradientStops)[2].(GradientStop.Color)" 
                                              Duration="0:0:0.3"/>
                                <ThicknessAnimation To="1" 
                                                  Storyboard.TargetProperty="BorderThickness" 
                                                  Duration="0:0:0.2"/>
                                <ColorAnimation To="#AAB7B8" 
                                              Storyboard.TargetProperty="BorderBrush.Color" 
                                              Duration="0:0:0.3"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.ExitActions>
                </Trigger>
            </Style.Triggers>
        </Style>

    </Window.Resources>

    <Grid Background="#FF99B7D4">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Заголовок -->
        <Border Grid.Row="0" Background="#2C3E50" Padding="20">
            <TextBlock Text="Текстовый редактор с различными типами триггеров" 
                      FontSize="24" FontWeight="Bold" 
                      HorizontalAlignment="Center" Foreground="White"
                      TextAlignment="Center"
                      FontFamily="Segoe UI"/>
        </Border>

        <!-- Панель управления -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" 
                   HorizontalAlignment="Center" Margin="25,20">
            <Button x:Name="OpenButton" Content="📂 Открыть" 
                   Style="{StaticResource OpenButtonStyle}"
                   Width="130" Click="OpenButton_Click"
                   ToolTip="Загрузить пример текста"/>

            <Button x:Name="ClearButton" Content="🗑️ Очистить" 
                   Style="{StaticResource ClearButtonStyle}"
                   Width="130" Click="ClearButton_Click"
                   ToolTip="Очистить оба текстовых поля"/>

            <Button x:Name="CloseButton" Content="⬅️ Закрыть" 
                   Style="{StaticResource CloseButtonStyle}"
                   Width="130" Click="CloseButton_Click"
                   ToolTip="Вернуться в главное меню (доступно только когда оба поля пусты)"/>
        </StackPanel>

        <!-- Текстовые поля -->
        <Grid Grid.Row="2" Margin="25,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="15"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="0" Margin="0,0,8,0">
                <TextBlock Text="Текстовое поле 1:" 
                          FontWeight="SemiBold" Margin="0,0,0,8"
                          Foreground="#2C3E50"
                          FontFamily="Segoe UI"/>
                <TextBox x:Name="TextBox1" 
                        Style="{StaticResource AnimatedTextBoxStyle}"
                        TextChanged="TextBox_TextChanged"/>
            </StackPanel>

            <StackPanel Grid.Column="2" Margin="8,0,0,0">
                <TextBlock Text="Текстовое поле 2:" 
                          FontWeight="SemiBold" Margin="0,0,0,8"
                          Foreground="#2C3E50"
                          FontFamily="Segoe UI"/>
                <TextBox x:Name="TextBox2" 
                        Style="{StaticResource AnimatedTextBoxStyle}"
                        TextChanged="TextBox_TextChanged"/>
            </StackPanel>
        </Grid>

        <!-- Настройки стиля текста -->
        <Border Grid.Row="3" Background="#FFB8D1E4" Margin="25,20" Padding="18" CornerRadius="10">
            <StackPanel>
                <TextBlock Text="Настройки внешнего вида текста:" 
                          FontSize="17" FontWeight="Bold" 
                          Margin="0,0,0,12" Foreground="#2874A6"
                          FontFamily="Segoe UI"/>

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <TextBlock Text="Стиль шрифта:" 
                              VerticalAlignment="Center" Margin="0,0,12,0"
                              FontWeight="SemiBold"
                              FontFamily="Segoe UI"/>

                    <ComboBox x:Name="FontStyleComboBox" Width="220" 
                             SelectionChanged="FontStyleComboBox_SelectionChanged"
                             FontFamily="Segoe UI">
                        <ComboBoxItem Content="Обычный (Arial, 12pt)" Tag="Normal"/>
                        <ComboBoxItem Content="Заголовок (Times New Roman, 16pt)" Tag="Header"/>
                        <ComboBoxItem Content="Код (Consolas, 11pt)" Tag="Code"/>
                        <ComboBoxItem Content="Выделенный (Verdana, 14pt)" Tag="Highlight"/>
                    </ComboBox>

                    <TextBlock Text="Цвет текста:" 
                              VerticalAlignment="Center" Margin="25,0,12,0"
                              FontWeight="SemiBold"
                              FontFamily="Segoe UI"/>

                    <ComboBox x:Name="ColorComboBox" Width="160"
                             SelectionChanged="ColorComboBox_SelectionChanged"
                             FontFamily="Segoe UI">
                        <ComboBoxItem Content="Черный" Tag="Black"/>
                        <ComboBoxItem Content="Синий" Tag="Blue"/>
                        <ComboBoxItem Content="Красный" Tag="Red"/>
                        <ComboBoxItem Content="Зеленый" Tag="Green"/>
                        <ComboBoxItem Content="Фиолетовый" Tag="Purple"/>
                    </ComboBox>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- Панель статуса и навигации -->
        <Border Grid.Row="4" Background="#34495E" Padding="15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Статус -->
                <TextBlock x:Name="StatusText" Grid.Column="0"
                          Text="Готов к работе" 
                          VerticalAlignment="Center" Foreground="White"
                          FontStyle="Italic"
                          FontFamily="Segoe UI"/>

                <!-- Кнопка выхода -->
                <Button Grid.Column="1" Content="🚪 Выход" Click="ExitApp" 
                       Width="110" Margin="8"
                       Background="#FF954E46" Foreground="White"
                       FontWeight="SemiBold"
                       Cursor="Hand"
                       FontFamily="Segoe UI"/>
            </Grid>
        </Border>
    </Grid>
</Window>